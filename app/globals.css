@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    @apply bg-surface-primary text-label-primary antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply min-h-screen bg-surface-primary text-label-primary;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text',
                 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  /* Minimal scrollbar - almost invisible */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-surface-quaternary/50 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-surface-quaternary;
  }

  /* Selection */
  ::selection {
    @apply bg-accent-blue/30 text-white;
  }

  /* Focus styles - subtle but accessible */
  *:focus {
    @apply outline-none;
  }

  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-accent-blue/50 ring-offset-2 ring-offset-surface-primary;
  }
}

@layer components {
  /* ===== iOS GLASS MATERIAL ===== */
  /* Standard frosted glass - for nav, cards */
  .glass {
    @apply bg-surface-elevated/80 backdrop-blur-xl border-t border-white/[0.08];
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }

  /* Thick glass - for modals, sheets */
  .glass-thick {
    @apply bg-surface-elevated/90 backdrop-blur-2xl border border-white/[0.05];
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
  }

  /* Ultra-thin glass - for overlays */
  .glass-thin {
    @apply bg-black/40 backdrop-blur-xl;
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
  }

  /* ===== BUTTONS - Apple Style ===== */
  /* Primary - Solid white, black text */
  .btn-primary {
    @apply bg-white text-black font-semibold
           px-6 py-3 rounded-full
           transition-all duration-200 ease-ios
           hover:bg-white/90
           active:scale-[0.98] active:bg-white/80
           inline-flex items-center justify-center gap-2;
  }

  /* Secondary - Glass with white text */
  .btn-secondary {
    @apply bg-surface-tertiary/80 text-white font-medium
           px-6 py-3 rounded-full
           transition-all duration-200 ease-ios
           hover:bg-surface-tertiary
           active:scale-[0.98]
           inline-flex items-center justify-center gap-2;
  }

  /* Ghost - Minimal, text only feel */
  .btn-ghost {
    @apply bg-transparent text-label-secondary font-medium
           px-4 py-2 rounded-ios
           transition-all duration-200 ease-ios
           hover:bg-surface-elevated hover:text-white
           active:scale-[0.98]
           inline-flex items-center justify-center gap-2;
  }

  /* Accent - For primary CTAs (use sparingly) */
  .btn-accent {
    @apply bg-accent-blue text-white font-semibold
           px-6 py-3 rounded-full
           transition-all duration-200 ease-ios
           hover:bg-accent-blue/90
           active:scale-[0.98]
           inline-flex items-center justify-center gap-2;
  }

  /* ===== CARDS - Surface Elevation ===== */
  /* Standard card - subtle elevation */
  .card {
    @apply bg-surface-elevated rounded-ios-lg p-6
           transition-all duration-200 ease-ios;
  }

  .card-interactive {
    @apply bg-surface-elevated rounded-ios-lg p-6
           transition-all duration-200 ease-ios
           hover:bg-surface-secondary
           active:scale-[0.995];
  }

  /* Grouped list - iOS Settings style */
  .card-group {
    @apply bg-surface-elevated rounded-ios-lg overflow-hidden divide-y divide-surface-quaternary/30;
  }

  .card-group-item {
    @apply px-4 py-3 flex items-center justify-between
           transition-colors duration-150
           hover:bg-surface-secondary
           active:bg-surface-tertiary;
  }

  /* ===== FORMS ===== */
  .form-input {
    @apply w-full bg-surface-elevated
           border-0 rounded-ios
           px-4 py-3
           text-white placeholder-label-tertiary
           transition-all duration-200
           focus:ring-2 focus:ring-accent-blue/30;
  }

  .form-select {
    @apply w-full bg-surface-elevated
           border-0 rounded-ios
           px-4 py-3
           text-white
           transition-all duration-200
           focus:ring-2 focus:ring-accent-blue/30;
    color-scheme: dark;
  }

  .form-select option {
    @apply bg-surface-secondary text-white;
  }

  .form-label {
    @apply block text-footnote text-label-secondary uppercase tracking-wide mb-2;
  }

  /* ===== NAVIGATION ===== */
  .nav-item {
    @apply px-4 py-2 rounded-ios
           text-label-secondary font-medium
           transition-all duration-200 ease-ios
           hover:bg-surface-elevated hover:text-white;
  }

  .nav-item-active {
    @apply bg-surface-elevated text-white;
  }

  /* ===== TYPOGRAPHY UTILITIES ===== */
  /* Note: Using direct styles instead of @apply to avoid circular dependencies
     since fontSize utilities are defined in tailwind.config.js */
  .heading-display {
    font-size: 56px;
    line-height: 1.1;
    letter-spacing: -0.02em;
    font-weight: 700;
  }

  .heading-1 {
    font-size: 34px;
    line-height: 1.2;
    letter-spacing: -0.01em;
    font-weight: 700;
  }

  .heading-2 {
    font-size: 28px;
    line-height: 1.25;
    letter-spacing: -0.01em;
    font-weight: 700;
  }

  .heading-3 {
    font-size: 22px;
    line-height: 1.3;
    font-weight: 600;
  }

  .text-secondary {
    @apply text-label-secondary;
  }

  .text-tertiary {
    @apply text-label-tertiary;
  }

  /* ===== DIVIDERS ===== */
  .divider {
    @apply h-px bg-surface-quaternary/30;
  }

  .divider-inset {
    @apply h-px bg-surface-quaternary/30 ml-4;
  }

  /* ===== STATUS INDICATORS ===== */
  .badge {
    @apply inline-flex items-center gap-1.5
           px-2.5 py-1 rounded-full
           text-caption-1 font-medium;
  }

  .badge-success {
    @apply bg-accent-green/15 text-accent-green;
  }

  .badge-warning {
    @apply bg-accent-orange/15 text-accent-orange;
  }

  .badge-error {
    @apply bg-accent-red/15 text-accent-red;
  }

  .badge-info {
    @apply bg-accent-blue/15 text-accent-blue;
  }

  /* ===== WALLET BUTTON (Privy/Solana) ===== */
  .wallet-adapter-button-trigger,
  .wallet-adapter-button {
    @apply bg-white text-black font-semibold
           px-5 py-2.5 rounded-full
           transition-all duration-200 ease-ios
           hover:bg-white/90
           active:scale-[0.98]
           border-0 !important;
  }

  /* ===== LOADING STATES ===== */
  .skeleton {
    @apply bg-surface-secondary rounded-ios animate-pulse;
  }

  .loading-spinner {
    @apply w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin;
  }

  /* ===== MOBILE OPTIMIZATION ===== */
  @media (hover: none) and (pointer: coarse) {
    button, a, .clickable {
      @apply min-h-[44px];
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
  }

  @media (max-width: 768px) {
    .wallet-adapter-button {
      @apply text-sm px-4 py-2 !important;
    }
  }

  /* ===== LEGACY SUPPORT (gradual migration) ===== */
  /* Keep gradient utilities for components not yet migrated */
  .text-gradient {
    @apply bg-gradient-to-r from-accent-purple to-accent-green bg-clip-text text-transparent;
  }

  .bg-gradient-solana {
    background: linear-gradient(135deg, #9945FF 0%, #14F195 100%);
  }
}
